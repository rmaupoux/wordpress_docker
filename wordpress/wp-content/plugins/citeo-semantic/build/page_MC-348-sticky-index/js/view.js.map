{"version":3,"file":"page_MC-348-sticky-index/js/view.js","mappings":";;;;AAAA,MAAMA,eAAe,GAAGC,QAAQ,CAACC,gBAAgB,CAAC,4CAA4C,CAAC;AAE/FF,eAAe,CAACG,OAAO,CAACC,IAAI,IAAI;EAC5B,MAAMC,SAAS,GAAGD,IAAI,CAACF,gBAAgB,CAAC,4CAA4C,CAAC;EACrF,MAAMI,WAAW,GAAGF,IAAI,CAACF,gBAAgB,CAAC,sDAAsD,CAAC;EAEjG,MAAMK,UAAU,GAAGH,IAAI,CAACF,gBAAgB,CAAC,0DAA0D,CAAC;EACpG,IAAGK,UAAU,CAACC,MAAM,IAAI,CAAC,EAAEH,SAAS,CAAC,CAAC,CAAC,CAACI,SAAS,CAACC,GAAG,CAAC,WAAW,CAAC;EAElEL,SAAS,CAACF,OAAO,CAACQ,KAAK,IAAI;IACvBA,KAAK,CAACC,gBAAgB,CAAC,OAAO,EAAE,MAAM;MAClC,IAAGD,KAAK,CAACF,SAAS,CAACI,QAAQ,CAAC,WAAW,CAAC,EAAE;MAE1C,MAAMC,cAAc,GAAGV,IAAI,CAACF,gBAAgB,CAAC,0DAA0D,CAAC;MACxGY,cAAc,CAACX,OAAO,CAACY,EAAE,IAAIA,EAAE,CAACN,SAAS,CAACO,MAAM,CAAC,WAAW,CAAC,CAAC;MAE9DL,KAAK,CAACF,SAAS,CAACC,GAAG,CAAC,WAAW,CAAC;MAEhC,IAAGJ,WAAW,EAAE;QACZ,MAAMW,aAAa,GAAG,CAAC,GAAGX,WAAW,CAAC,CAACY,IAAI,CAACC,OAAO,IAAIA,OAAO,CAACC,OAAO,CAACC,EAAE,KAAKV,KAAK,CAACS,OAAO,CAACC,EAAE,CAAC;QAE/F,IAAGJ,aAAa,EAAE;UACd,MAAMK,gBAAgB,GAAGL,aAAa,CAACM,qBAAqB,CAAC,CAAC,CAACC,GAAG;UAClE,IAAIC,YAAY,GAAGxB,QAAQ,CAACyB,IAAI,CAACjB,SAAS,CAACI,QAAQ,CAAC,WAAW,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,EAAE;UAC7E,IAAGc,MAAM,CAACC,UAAU,GAAG,GAAG,EAAEH,YAAY,GAAG,CAAC,EAAE;UAC9C,MAAMI,CAAC,GAAGP,gBAAgB,GAAGK,MAAM,CAACG,OAAO,GAAGL,YAAY;UAE1DE,MAAM,CAACI,QAAQ,CAAE;YAAEP,GAAG,EAAEK,CAAC;YAAEG,QAAQ,EAAE;UAAS,CAAE,CAAC;QACrD,CAAC,MACIC,OAAO,CAACC,IAAI,CAAC,4DAA4D,CAAC;MACnF;IACJ,CAAC,CAAC;EACN,CAAC,CAAC;;EAEF;EACA;EACA;EACA;EACA;;EAEA;;EAEA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;AACJ,CAAC,CAAC,C","sources":["webpack://ds-citeocom/./src/page_MC-348-sticky-index/js/view.js"],"sourcesContent":["const stickyIndexPage = document.querySelectorAll('.wp-block-citeo-semantic-sticky-index-page');\r\n\r\nstickyIndexPage.forEach(page => {\r\n    const indexList = page.querySelectorAll('.wp-block-citeo-semantic-sticky-index-item');\r\n    const sectionList = page.querySelectorAll('.wp-block-citeo-semantic-sticky-index-linked-section');\r\n\r\n    const activeInit = page.querySelectorAll('.wp-block-citeo-semantic-sticky-index-wrapper .is-active');\r\n    if(activeInit.length <= 0) indexList[0].classList.add('is-active');\r\n\r\n    indexList.forEach(index => {\r\n        index.addEventListener('click', () => {\r\n            if(index.classList.contains('is-active')) return;\r\n\r\n            const previousActive = page.querySelectorAll('.wp-block-citeo-semantic-sticky-index-wrapper .is-active')\r\n            previousActive.forEach(el => el.classList.remove('is-active'))\r\n\r\n            index.classList.add('is-active');\r\n\r\n            if(sectionList) {\r\n                const linkedSection = [...sectionList].find(section => section.dataset.id === index.dataset.id);\r\n\r\n                if(linkedSection) {\r\n                    const linkedSectionTop = linkedSection.getBoundingClientRect().top\r\n                    let scrollOffset = document.body.classList.contains('admin-bar') ? -120 : -88;\r\n                    if(window.innerWidth < 950) scrollOffset = -48\r\n                    const y = linkedSectionTop + window.scrollY + scrollOffset\r\n\r\n                    window.scrollTo( { top: y, behavior: 'smooth' } );\r\n                }\r\n                else console.warn('No linked section was found, cannot scroll to the content.');\r\n            }\r\n        });\r\n    });\r\n\r\n    // // IntersectionObserver to track visible sections\r\n    // const observer = new IntersectionObserver((entries) => {\r\n    //     entries.forEach(entry => {\r\n    //         if (entry.isIntersecting) {\r\n    //             const linkedIndex = [...indexList].find(index => index.dataset.id === entry.target.dataset.id);\r\n\r\n    //             if(linkedIndex.classList.contains('is-active')) return;\r\n\r\n    //             const previousActive = page.querySelectorAll('.is-active')\r\n    //             previousActive.forEach(el => el.classList.remove('is-active'));\r\n\r\n    //             linkedIndex.classList.add('is-active');\r\n    //         }\r\n    //     });\r\n    // }, {   \r\n    //     threshold: 0.5\r\n    // });\r\n\r\n    // sectionList.forEach(section => {\r\n    //     observer.observe(section);\r\n    // });\r\n})"],"names":["stickyIndexPage","document","querySelectorAll","forEach","page","indexList","sectionList","activeInit","length","classList","add","index","addEventListener","contains","previousActive","el","remove","linkedSection","find","section","dataset","id","linkedSectionTop","getBoundingClientRect","top","scrollOffset","body","window","innerWidth","y","scrollY","scrollTo","behavior","console","warn"],"sourceRoot":""}