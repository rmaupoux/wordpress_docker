{"version":3,"file":"block_CC2-829_fade-slider/js/view.js","mappings":"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","sources":["webpack://ds-citeocom/./src/block_CC2-829_fade-slider/js/view.js"],"sourcesContent":["const fadeSlider = document.querySelectorAll('.has-fade-slider');\r\n\r\n// Initialize slider with first item active and set parent height to its highest children height\r\nconst resizeSlideItems = () => {\r\n    fadeSlider.forEach(slider => {\r\n        const wrap = slider.querySelector('.slider-wrap')\r\n        const sliderChildren = [...wrap.children]\r\n    \r\n        let maxHeight = sliderChildren[0].getBoundingClientRect().height\r\n    \r\n        // Default to first slide active\r\n        if(!wrap.querySelector('is-active')) sliderChildren[0].classList.add('is-active');\r\n    \r\n        sliderChildren.forEach(child => {\r\n            const height = child.getBoundingClientRect().height\r\n            maxHeight = Math.max(height, maxHeight);\r\n        });\r\n    \r\n        wrap.style.height = `${maxHeight}px`;\r\n    });\r\n}\r\nwindow.addEventListener('resize', () => resizeSlideItems())\r\nresizeSlideItems();\r\n\r\n// Update slider active slide every {X}ms\r\nconst changeActiveSlide = (wrap, newIndex) => {\r\n    const slide = wrap.querySelector('.slider-wrap'), totalWrap = wrap.querySelector('.total-wrap')\r\n    const hasStepper = slide.dataset.stepper === 'true', hasTotal = slide.dataset.total === 'true'\r\n\r\n    const isActive = slide.querySelector('.is-active');\r\n    isActive.classList.remove('is-active');\r\n\r\n    let index = 0;\r\n    const itemArr = [...slide.children]\r\n\r\n    if(newIndex === undefined) {\r\n        index = itemArr.indexOf(isActive)\r\n        \r\n        if(index + 1 >= itemArr.length) index = 0\r\n        else index++;\r\n\r\n    } else {\r\n        index = newIndex;\r\n    }\r\n\r\n    itemArr[index].classList.add('is-active');\r\n\r\n    if(hasStepper) {\r\n        const activeStep = wrap.querySelector('.active-step');\r\n        activeStep?.classList.remove('active-step');\r\n\r\n        const stepIndexList = wrap.querySelectorAll('.step-index');\r\n        stepIndexList[index].classList.add('active-step');\r\n    }   \r\n\r\n    \r\n    if(hasTotal) {\r\n        totalWrap.innerHTML = `${index + 1}/${slide.children.length}`\r\n    }\r\n}\r\n\r\nfadeSlider.forEach(slider => {\r\n    const wrap = slider.querySelector('.slider-wrap');\r\n    const totalWrap = slider.querySelector('.total-wrap')\r\n    let interval = parseInt(wrap.dataset.timer) * 1000\r\n\r\n    if(!interval) interval = 5000\r\n\r\n    let fadeInterval = setInterval(() => changeActiveSlide(slider), interval);\r\n    \r\n    const hasStepper = wrap.dataset.stepper === 'true'\r\n\r\n    if(hasStepper) {\r\n        const controlStepper = slider.querySelector('.stepper-wrap')\r\n        controlStepper.innerHTML = '';\r\n\r\n        for(let i = 0; i < wrap.children.length; i++) {\r\n\r\n            const stepIndex = document.createElement('span')\r\n            stepIndex.classList.add('step-index');\r\n            \r\n            controlStepper.appendChild(stepIndex);\r\n            \r\n            stepIndex.addEventListener('click', () => {\r\n\r\n                clearInterval(fadeInterval);\r\n                changeActiveSlide(slider, i)\r\n\r\n                fadeInterval = setInterval(() => changeActiveSlide(slider), interval);\r\n            });\r\n        }\r\n\r\n        const stepIndexList = controlStepper.querySelectorAll('.step-index');\r\n\r\n        stepIndexList[0].classList.add('active-step');\r\n    }\r\n\r\n    const slides = [...wrap.children]   \r\n\r\n    // TOTAL \r\n    const hasTotal = wrap.dataset.total === 'true'\r\n    if(hasTotal) {  \r\n        const active = wrap.querySelector('.is-active')\r\n\r\n        const index = slides.indexOf(active)      \r\n        totalWrap.innerHTML = `${index + 1}/${wrap.children.length}`\r\n    }\r\n\r\n    const next = slider.querySelector('.next-slide'), prev = slider.querySelector('.prev-slide')\r\n    if(next && prev) {\r\n        next.addEventListener('click', () => {\r\n            clearInterval(fadeInterval);\r\n            changeActiveSlide(slider);  \r\n\r\n            fadeInterval = setInterval(() => changeActiveSlide(slider), interval);\r\n        });\r\n\r\n        prev.addEventListener('click', () => {\r\n            clearInterval(fadeInterval);\r\n            const active = wrap.querySelector('.is-active')\r\n\r\n            let index = slides.indexOf(active)\r\n            if(index - 1 < 0) index = wrap.children.length - 1\r\n            else index--;\r\n\r\n            changeActiveSlide(slider, index);\r\n\r\n            fadeInterval = setInterval(() => changeActiveSlide(slider), interval);\r\n        });\r\n    }\r\n});"],"names":["fadeSlider","document","querySelectorAll","resizeSlideItems","forEach","slider","wrap","querySelector","sliderChildren","children","maxHeight","getBoundingClientRect","height","classList","add","child","Math","max","style","window","addEventListener","changeActiveSlide","newIndex","slide","totalWrap","hasStepper","dataset","stepper","hasTotal","total","isActive","remove","index","itemArr","undefined","indexOf","length","activeStep","stepIndexList","innerHTML","interval","parseInt","timer","fadeInterval","setInterval","controlStepper","i","stepIndex","createElement","appendChild","clearInterval","slides","active","next","prev"],"sourceRoot":""}